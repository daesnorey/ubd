<div class="content">
  <input #search (keyup)=look_up(search.value) placeholder="Busqueda... " id="search">
  <button id="addButton" (click)="open_modal(content)"> + </button>
</div>
<div *ngIf="third_partys" class="content">
  <table class="table">
    <thead>
      <tr>
        <th>ID</th>
        <th>TIPO DOCUMENTO</th>
        <th>NUMERO DOCUMENTO</th>
        <th>NOMBRES</th>
        <th>APELLIDOS</th>
        <th>FECHA NACIMIENTO</th>
        <th>ESTADO CIVIL</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let third of third_partys" (click)="open_modal(content,third)">
        <th>{{third.id}}</th>
        <td>
          <select [(ngModel)]="third.document_type" disabled="disabled">
            <option *ngFor="let item of document_type" [ngValue]="item.id">
              {{item.name}}
            </option>
          </select>
        </td>
        <td>{{third.document_number}}</td>
        <td>{{third.names}}</td>
        <td>{{third.surnames}}</td>
        <td>{{third.born_date | date:'yyyy-MM-dd'}}</td>
        <td>
          <select [(ngModel)]="third.marital_status" disabled="disabled">
            <option *ngFor="let item of marital_status" [ngValue]="item.id">
              {{item.name}}
            </option>
          </select>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<ng-template #content let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title">Modal title</h4>
    <button type="button" class="close" aria-label="Close" (click)="d()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <mat-accordion>
      <mat-expansion-panel expanded hideToggle>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Tercero
          </mat-panel-title>
          <mat-panel-description>
            Información del tercero
          </mat-panel-description>
        </mat-expansion-panel-header>
        
        <div class="col-md-12">
          <mat-form-field class="col-md-5">
            <mat-select placeholder="Tipo de documento" [(ngModel)]="third_party.document_type" name="document_type" [disabled]="!editable">
              <mat-option *ngFor="let item of document_type" [value]="item.id">
                  {{item.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field class="col-md-5">
            <input matInput [(ngModel)]="third_party.document_number" placeholder="Numero de documento" [disabled]="!editable">
          </mat-form-field>
          <mat-form-field class="col-md-5">
            <input matInput [(ngModel)]="third_party.names" placeholder="Nombres" [disabled]="!editable">
          </mat-form-field>
          <mat-form-field class="col-md-5">
            <input matInput [(ngModel)]="third_party.surnames" placeholder="Apellidos" [disabled]="!editable">
          </mat-form-field>
          <mat-form-field class="col-md-5">
            <input matInput [matDatepicker]="matDate" [(ngModel)]="third_party.born_date" placeholder="Fecha de nacimiento" [disabled]="!editable">
            <mat-datepicker-toggle matSuffix [for]="matDate"></mat-datepicker-toggle>
            <mat-datepicker #matDate></mat-datepicker>
          </mat-form-field>
          <mat-form-field class="col-md-5">
            <mat-select placeholder="Estado civil" [(ngModel)]="third_party.marital_status" name="marital_status" [disabled]="!editable">
              <mat-option *ngFor="let item of marital_status" [value]="item.id">
                  {{item.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <mat-action-row>
            <button mat-button color="primary" (click)="save(third_party)">Guardar</button>
        </mat-action-row>
      </mat-expansion-panel>

      <mat-expansion-panel (opened)="panelOpenState = true" [disabled]="!third_party.id">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Cliente
          </mat-panel-title>
          <mat-panel-description>
            Información del cliente
          </mat-panel-description>
        </mat-expansion-panel-header>
        <app-client></app-client>
      </mat-expansion-panel>
      <mat-expansion-panel (opened)="panelOpenState = true" [disabled]="!third_party.id">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Empleado
          </mat-panel-title>
          <mat-panel-description>
            Información del empleado
          </mat-panel-description>
        </mat-expansion-panel-header>
        <app-employee></app-employee>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-dark" (click)="c()">Cerrar</button>
  </div>
</ng-template>